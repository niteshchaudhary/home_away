<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="e9a7bc75-a9ba-4b36-9c70-9ee6cf788703" activeEnvironment="Default" name="REST Project 1" resourceRoot="" soapui-version="5.1.3" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings/><con:interface xsi:type="con:RestService" id="9f7f470d-915f-4d1a-a3e3-035e442da15e" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://api.data.gov" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://api.data.gov</con:endpoint></con:endpoints><con:resource name="Nearest.json" path="/nrel/alt-fuel-stations/v1/nearest.json" id="fc8a305c-e0f9-422c-bfd7-60491b316998"><con:settings/><con:parameters><con:parameter><con:name>api_key</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>location</con:name><con:value/><con:style>QUERY</con:style><con:default/><con:description xsi:nil="true"/></con:parameter></con:parameters><con:method name="Nearest.json" id="b7396cfa-9424-4b70-9960-edfebfed8797" method="GET"><con:settings/><con:parameters/><con:representation type="FAULT"><con:mediaType>application/json</con:mediaType><con:status>403</con:status><con:params/><con:element xmlns:near="https://api.data.gov/nrel/alt-fuel-stations/v1/nearest.json">near:Fault</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>422</con:status><con:params/><con:element xmlns:near="https://api.data.gov/nrel/alt-fuel-stations/v1/nearest.json">near:Fault</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:near="https://api.data.gov/nrel/alt-fuel-stations/v1/nearest.json">near:Response</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=utf-8</con:mediaType><con:status>406</con:status><con:params/></con:representation><con:representation type="RESPONSE"><con:mediaType>text/html; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/></con:representation><con:request name="Request 1" id="f92c15fa-6a25-48e9-83a3-89fade91b326" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://api.data.gov</con:endpoint><con:request/><con:originalUri>https://api.data.gov/nrel/alt-fuel-stations/v1/nearest.json</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="location" value="Austin,TX"/>
  <con:entry key="api_key" value="a8uxAmW8R2eNTha9Q0AcXf3bUhNDVt97FrPBUMo2"/>
</con:parameters><con:parameterOrder><con:entry>api_key</con:entry><con:entry>location</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:interface xsi:type="con:RestService" id="dd2c9eb6-7911-4015-833d-da0327e917a2" wadlVersion="http://wadl.dev.java.net/2009/02" name="https://developer.nrel.gov" type="rest" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart=""/><con:endpoints><con:endpoint>https://developer.nrel.gov</con:endpoint></con:endpoints><con:resource name="39534.json" path="/api/alt-fuel-stations/v1/{id}.json" id="5eb36180-314c-4fb3-9269-98d94900b1d0"><con:settings/><con:parameters><con:parameter><con:name>api_key</con:name><con:value>a8uxAmW8R2eNTha9Q0AcXf3bUhNDVt97FrPBUMo2</con:value><con:style>QUERY</con:style><con:default>a8uxAmW8R2eNTha9Q0AcXf3bUhNDVt97FrPBUMo2</con:default><con:path xsi:nil="true"/><con:description xsi:nil="true"/></con:parameter><con:parameter><con:name>id</con:name><con:value>39534</con:value><con:style>TEMPLATE</con:style><con:default>39534</con:default></con:parameter></con:parameters><con:method name="39534.json" id="db1f9266-4a06-4eb1-84c1-6a1c81927bec" method="GET"><con:settings/><con:parameters/><con:representation type="RESPONSE"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element xmlns:json="https://developer.nrel.gov/api/alt-fuel-stations/v1/39534.json">json:Response</con:element></con:representation><con:representation type="RESPONSE"><con:mediaType>text/html; charset=utf-8</con:mediaType><con:status>200</con:status><con:params/><con:element>html</con:element></con:representation><con:representation type="FAULT"><con:mediaType>application/json; charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element xmlns:json="https://developer.nrel.gov/api/alt-fuel-stations/v1/39534.json">json:Fault</con:element></con:representation><con:representation type="FAULT"><con:mediaType>text/html; charset=utf-8</con:mediaType><con:status>404</con:status><con:params/><con:element>html</con:element></con:representation><con:request name="Request 1" id="a4ca561d-aeda-4f26-9de4-a1b17a5ff0e5" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://developer.nrel.gov</con:endpoint><con:request/><con:originalUri>https://developer.nrel.gov/api/alt-fuel-stations/v1/39534.json</con:originalUri><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="62029" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>api_key</con:entry><con:entry>id</con:entry></con:parameterOrder></con:request></con:method></con:resource></con:interface><con:testSuite id="9c0b6a37-29ac-44b2-bee1-e5a77369a29f" name="FindGasStation"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="3d409bc7-ca0e-45c2-992c-75ec9ce000b0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="NearestStation" searchProperties="true"><con:settings/><con:testStep type="restrequest" name="NearestStation - Request 1" id="a6157f02-8441-47e3-b021-36fbd49ee65a"><con:settings/><con:config service="https://api.data.gov" resourcePath="/nrel/alt-fuel-stations/v1/nearest.json" methodName="Nearest.json" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="NearestStation - Request 1" id="f92c15fa-6a25-48e9-83a3-89fade91b326" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://api.data.gov</con:endpoint><con:request/><con:originalUri>https://api.data.gov/nrel/alt-fuel-stations/v1/nearest.json</con:originalUri><con:assertion type="GroovyScriptAssertion" id="f9e0a8ac-1fa0-46e1-84c2-fac515dd2ced" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper


def response= messageExchange.response.responseContent

def slurper = new JsonSlurper();
def result= slurper.parseText(response)
def found=0;
def station_id = 0;
log.info result.fuel_stations.size
for(int i=0;i&lt;result.fuel_stations.size;i++){
	if(result.fuel_stations[i].station_name.equals("HYATT AUSTIN")){
		found=1;
		station_id = result.fuel_stations[i].id	
	}
}

log.info station_id
 
context.testCase.testSuite.setPropertyValue("id",station_id.toString())
  if(found == 1){
  	assert(true)
  }else{
  	assert(false)
  }


</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters>
  <con:entry key="location" value="Austin,TX"/>
  <con:entry key="api_key" value="a8uxAmW8R2eNTha9Q0AcXf3bUhNDVt97FrPBUMo2"/>
</con:parameters><con:parameterOrder><con:entry>api_key</con:entry><con:entry>location</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="GetStation" id="cd18bbef-544a-462c-be9e-86b1c7569c94"><con:settings/><con:config service="https://developer.nrel.gov" resourcePath="/api/alt-fuel-stations/v1/{id}.json" methodName="39534.json" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="GetStation" id="a4ca561d-aeda-4f26-9de4-a1b17a5ff0e5" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://developer.nrel.gov</con:endpoint><con:request/><con:originalUri>https://developer.nrel.gov/api/alt-fuel-stations/v1/39534.json</con:originalUri><con:assertion type="GroovyScriptAssertion" id="996026d1-a332-432e-a069-6d97e6f7a5d8" name="Script Assertion"><con:configuration><scriptText>import groovy.json.JsonSlurper


def response= messageExchange.response.responseContent

def slurper = new JsonSlurper();
def result= slurper.parseText(response)


assert result.alt_fuel_station.street_address == "208 Barton Springs Rd"
assert result.alt_fuel_station.state == "TX"
assert result.alt_fuel_station.city == "Austin"
assert result.alt_fuel_station.zip == "78704"
</scriptText></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:parameters><entry key="id" value="${#TestSuite#id}" xmlns="http://eviware.com/soapui/config"/></con:parameters><con:parameterOrder><con:entry>api_key</con:entry><con:entry>id</con:entry></con:parameterOrder></con:restRequest></con:config></con:testStep><con:properties/></con:testCase><con:properties><con:property><con:name>id</con:name><con:value>62029</con:value></con:property></con:properties></con:testSuite><con:properties/><con:wssContainer/><con:oAuth2ProfileContainer/></con:soapui-project>